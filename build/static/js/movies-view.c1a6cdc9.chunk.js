(this["webpackJsonpgoit-react-hw-04-movie"]=this["webpackJsonpgoit-react-hw-04-movie"]||[]).push([[5],{117:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(73),r=a(62),o=a(0),i=a(3),s=a(18),u=a(19),h=(a(65),a(85)),m=a.n(h),l=function(){var e=Object(o.useState)(""),t=Object(r.a)(e,2),a=t[0],s=t[1],h=Object(i.g)(),l=Object(i.f)();return Object(c.jsx)("header",{className:m.a.Searchbar,children:Object(c.jsxs)("form",{className:m.a.SearchForm,children:[Object(c.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),l.push(Object(n.a)(Object(n.a)({},h),{},{search:"query=".concat(e.target.form.movieName.value)})),""!==a.trim()?s(""):u.b.warn("\u0412\u0432\u0438\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!")},className:m.a.SearchForm_button,children:Object(c.jsx)("span",{className:m.a.SearchForm_button_label,children:"Search"})}),Object(c.jsx)("input",{className:m.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movie",value:a,name:"movieName",id:"",onChange:function(e){s(e.currentTarget.value.toLowerCase())}})]})})},b=a(68),j=a(70),f=a(112),g=a(61),p="idle",v="pending",d="resolved",_="rejected";t.default=function(){var e,t=Object(o.useState)([]),a=Object(r.a)(t,2),u=a[0],h=a[1],m=Object(o.useState)(null),O=Object(r.a)(m,2),S=O[0],M=O[1],w=Object(o.useState)(p),y=Object(r.a)(w,2),x=y[0],P=y[1],F=Object(o.useState)(0),N=Object(r.a)(F,2),k=N[0],I=N[1],C=Object(j.a)(),L=Object(i.f)(),E=Object(i.g)(),T=null!==(e=new URLSearchParams(E.search).get("page"))&&void 0!==e?e:1;Object(o.useEffect)((function(){""!==E.search&&U(new URLSearchParams(E.search).get("query"))}),[E.search]);var U=function(e,t){g.a.fetchMovieByName(e,t).then((function(e){var t=e.results,a=e.total_pages;return 0!==t.length?(h(t),I(a),void P(d)):Promise.reject(new Error("Sorry. This movie was not found!"))})).catch((function(e){M(e),P(_)}))};return Object(c.jsxs)("main",{children:[Object(c.jsx)(l,{}),x===v&&Object(c.jsx)(s.a,{}),x===d&&Object(c.jsxs)(c.Fragment,{children:[u&&Object(c.jsx)(b.a,{movies:u}),k>1&&Object(c.jsx)(f.a,{className:C.root,count:k,onChange:function(e,t){L.push(Object(n.a)(Object(n.a)({},E),{},{search:"page=".concat(t)}))},page:Number(T),showFirstButton:!0,showLastButton:!0,size:"large"})]}),x===_&&Object(c.jsx)("h1",{children:S.message})]})}},61:function(e,t,a){"use strict";var c="c1ded0bfb98f51bbb3c132d34092ee93",n="https://api.themoviedb.org/3",r={fetchPopularMovies:function(e){return fetch("".concat(n,"/trending/movie/day?api_key=").concat(c,"&page=").concat(e)).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry, Something came wrong!"))}))},fetchMovieInfo:function(e){return fetch("".concat(n,"/movie/").concat(e,"?api_key=").concat(c,"&language=en-US")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry. This movie was not found!"))}))},fetchMovieByName:function(e,t){return fetch("".concat(n,"/search/movie?api_key=").concat(c,"&language=en-US&query=").concat(e,"&page=").concat(t)).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry. This movie was not found!"))}))},fetchCast:function(e){return fetch("".concat(n,"/movie/").concat(e,"/credits?api_key=").concat(c,"&language=en-US")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry. This movie was not found!"))}))},fetchReviews:function(e){return fetch("".concat(n,"/movie/").concat(e,"/reviews?api_key=").concat(c,"&language=en-US&page=1")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry. This movie was not found!"))}))},fetchModalForTrailler:function(e){return fetch("".concat(n,"/movie/").concat(e,"/videos?api_key=").concat(c,"&language=en-US")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Sorry. This trailer was not found!"))}))}};t.a=r},64:function(e,t,a){"use strict";t.a=a.p+"static/media/default.2e01288c.jpg"},65:function(e,t,a){},68:function(e,t,a){"use strict";var c=a(1),n=a(3),r=a(11),o=a(64),i=a(69),s=a.n(i);t.a=function(e){var t=e.movies,a=Object(n.i)().url,i=a,u=Object(n.g)();return"/"===a&&(i=a+"movies"),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("main",{className:s.a.main,children:Object(c.jsx)("ul",{className:s.a.list,children:t.map((function(e){var t=e.title,a=e.id,n=e.name,h=e.poster_path,m=e.vote_average;return Object(c.jsx)("li",{className:s.a.item,children:Object(c.jsx)(r.b,{to:{pathname:"".concat(i,"/").concat(a),state:{from:u}},children:Object(c.jsxs)("article",{children:[Object(c.jsx)("img",{src:h?"https://image.tmdb.org/t/p/w500/".concat(h):o.a,alt:t,width:"100%",className:s.a.poster}),Object(c.jsx)("div",{className:s.a.info,children:Object(c.jsxs)("h2",{className:s.a.title,children:[t||n,Object(c.jsx)("span",{className:s.a.rating,children:m})]})})]})})},a)}))})})})}},69:function(e,t,a){e.exports={main:"MoviesList_main__107gs",list:"MoviesList_list__1lRBZ",item:"MoviesList_item__1Rt4r",title:"MoviesList_title__2o3hp",poster:"MoviesList_poster__17HKy",rating:"MoviesList_rating__3Fyds"}},70:function(e,t,a){"use strict";var c=a(108),n=Object(c.a)({root:{display:"flex",justifyContent:"center","& .MuiPaginationItem-page.Mui-selected, & .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible,  & .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible":{backgroundColor:"#ff6b08",color:"white"},"& .MuiPaginationItem-root":{color:"bleak"},"& .MuiPaginationItem-page:hover, & .MuiPaginationItem-page.Mui-focusVisible":{opacity:"0.7"},"& .MuiPaginationItem-page.Mui-selected:hover, & .MuiPaginationItem-page.Mui-selected.Mui-focusVisible":{opacity:"1"},"& .MuiPagination-ul":{justifyContent:"center"}}});t.a=n},85:function(e,t,a){e.exports={Searchbar:"Searcbar_Searchbar__srXIb",SearchForm:"Searcbar_SearchForm__P4C8_",SearchForm_button:"Searcbar_SearchForm_button__1CVq2",SearchForm_button_label:"Searcbar_SearchForm_button_label__1B5iQ",SearchForm_input:"Searcbar_SearchForm_input__1YCxI"}}}]);
//# sourceMappingURL=movies-view.c1a6cdc9.chunk.js.map